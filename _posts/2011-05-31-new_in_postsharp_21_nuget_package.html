---
layout: post 
comments: true
title: "New in PostSharp 2.1: NuGet Package"
date: 2011-05-31 11:16:00 +02:00
permalink: /post/new-in-postsharp-21-nuget-package.html
author: ""
---
<p>Now that PostSharp 2.1 CTP 2 is out of the door, I&rsquo;ll write more about individual new features. Let&rsquo;s start with something easy: the <a href="http://www.nuget.org/List/Packages/PostSharp" target="_blank">NuGet package</a>.</p>



<p>The PostSharp nuget contains everything you need to add aspects to an application. So not only does it contain the run-time library PostSharp.dll, but all the stuff you need to build the project, including the Visual Studio Extension.</p>
<h2>Adding PostSharp to your application</h2>
<p>It has never been easier to add aspects to your code:</p>
<p><strong>1.</strong> Open the <em>Add Library Package Reference</em> dialog normally and search for a package named <em>PostSharp</em>. You may have to scroll down a bit because we just uploaded the package.</p>
<p><img src="/assets/images/blog/2011-05-31-new_in_postsharp_21_nuget_package/nuget-1b.png" alt=""></p>
<p>&nbsp;</p>
<p><strong>2.</strong> Click on <em>Install</em> :), accept license terms.</p>
<p><strong>3.</strong> A few seconds after the installation completes, and only the first time you add PostSharp on your machine, PostSharp will ask you if you want to install the Visual Studio Extension (VSX). The VSX is an important help, so we highly recommend you to install it.</p>
<p><img src="/assets/images/blog/2011-05-31-new_in_postsharp_21_nuget_package/nuget-2.png" alt=""></p>
<p>&nbsp;</p>
<p><strong>4.</strong> After the VSX has been installed, restart Visual Studio (again, you should do that only once per machine).</p>
<p>You can see a new page in the project properties. It means PostSharp is enabled for this project.</p>
<p><img src="/assets/images/blog/2011-05-31-new_in_postsharp_21_nuget_package/nuget-3.png" alt=""></p>
<h2>Features</h2>
<p>A lot of smart things actually happen behind this apparent simplicity. The installation process will:</p>
<ul>
<li>Add a reference to the proper <em>PostSharp.dll</em> library. Ok, this is obvious, all NuGet packages do that. Currently, the package supports the .NET Framework and Silverlight. </li>
<li>Add a reference to <em>PostSharp.targets</em> so that PostSharp kicks in the build process. </li>
<li>Remove any reference to a previous version of PostSharp. </li>
<li>Check whether a previous version of the VSX is installed, and help you to uninstall it if applicable. </li>
</ul>
<h2>Installation in Source Repository</h2>
<p>It has always been possible to install PostSharp into the source repository however, until this version, there were some inconveniences. In version 1.5, PostSharp ran much more slowly from source repository because its libraries were not ngenned. Version 2.0 mitigated this issue by providing a long-running process (pipe server), but you had to use the setup program to use the VSX.</p>
<p>Starting from version 2.1, you can even deploy the Visual Studio Extension (VSX) from the source repository. When a developer runs PostSharp for the first time on his machine, he will see a dialog box asking whether the VSX should be installed. When someone installs a newer version of PostSharp in the source repository, all developers are requested to upgrade the VSX. No administrative privilege is required. Everything happens in the user profile only.</p>
<p>Note that this feature is not bound to NuGet. You get the same if you use the zip distribution instead of the NuGet package.</p>
<h2>Summary</h2>
<p>NuGet is a very convenient way to install PostSharp. It provides a streamlined experience and does not require administrative privileges. But most importantly, it will allow third-party vendors and OSS projects to handle dependencies to PostSharp in a very easy way. If your project or product ships aspects, make it easy for developers: include PostSharp as a NuGet dependency.</p>
<p>We&rsquo;re open to remarks and ideas. Please add a comment to the current post or a topic to the support forum.</p>
<p>Happy PostSharping!</p>
<p>-gael</p>
