---
layout: post 
comments: true
title: "Introducing PostSharp Toolkits!"
date: 2012-02-21 12:36:00 +01:00
permalink: /post/introducing-postsharp-toolkits.html
author: "Igal Tabachnik"
---
<p>Since its inception, <a href="http://www.sharpcrafters.com/">PostSharp</a> had always allowed making Aspect-Oriented Programming in .NET easy, allowing developers to produce cleaner code, encapsulating infrastructure code behind reusable modules.</p>


  <p>We are pleased to announce today that we are making this even easier – with <strong>PostSharp Toolkits</strong>!</p>  <h4></h4>  <h4></h4>  <h4></h4>  <h4>What are PostSharp Toolkits?</h4>  <p>PostSharp Toolkits are a collection of ready-made solutions for adding common infrastructure code, such as logging, exception handling and performance monitoring to your application with no changes to your source code! Powered by PostSharp, the most complete AOP solution for .NET, the PostSharp Toolkits build upon the raw power of Aspect-Oriented Programming to seamlessly apply those solutions throughout your application.</p>  <h4></h4>  <h4>Sounds interesting, how does it work?</h4>  <p>We have great <a href="http://www.sharpcrafters.com/solutions">examples</a> on how to add things like logging, tracing, and exception handling to your code. We’ve built upon this knowledge, and added things like XML-configuration, so no changes in the source code are required! Simply grab the toolkit from NuGet, and you’re all set!</p>  <h4>What toolkits currently exist?</h4>  <p>With the first release, we’re introducing the <strong>PostSharp Diagnostics Toolkit</strong> – an instrumentation toolkit that adds diagnostics features, such as logging, exception handling, performance counters and feature tracking to your application. The PostSharp Diagnostics Toolkit includes pluggable support for the leading logging frameworks, such as NLog. Support for additional frameworks is coming soon!</p>  <p><strong>Note:</strong> As this is a work in progress, the PostSharp Diagnostics Toolkit currently only has logging support, with a very limited feature set. In the following releases, we will introduce additional configuration options, support for popular frameworks and other cool stuff!</p>  <p>The source code for the PostSharp Toolkits is <a href="https://github.com/sharpcrafters/PostSharp-Toolkits">available on GitHub</a>, and we’re going to introduce new features based on your feedback in short release cycles.</p>  <h2>Getting started</h2>  <p>Here is how to add logging to your application without changing a single line of code:</p>  <p>Starting with a simple project:</p>  <p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="" border="0" alt="" src="/blog/image.axd?picture=3f6df71b640a05fa.png" width="644" height="420"></p>  <ul>   <li><strong>Step 1</strong>: Add the <strong>PostSharp Diagnostics Toolkit </strong>from NuGet to the assembly you wish to instrument. It downloads PostSharp automatically as a dependency (please note that you need PostSharp 2.1 SP1 or higher for the PostSharp Toolkits). </li> </ul>  <p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="" border="0" alt="" src="/blog/image.axd?picture=1381112062df281.png" width="644" height="64"></p>  <ul>   <li><strong>Step 2:</strong> Rebuild your application </li> </ul>  <p>When you now run your application, this is what is printed in the output:</p>  <p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="" border="0" alt="" src="/blog/image.axd?picture=552c652224df8923.png" width="644" height="339"></p>  <h4>How did this happen?</h4>  <p>The NuGet installation creates a <strong>.psproj</strong> file named after the current project in the source tree. This is an XML file, containing the configuration, which is processed by PostSharp during compilation.</p>  <p>The details about the XML configuration will be posted on GitHub. For now, just note that in the <code>&lt;Data&gt;</code> section there is a definition of <code>LogAttribute</code>. This is equivalent of placing the LogAttribute (part of the toolkit) on an assembly level in the source code, via:</p>  <p><code>[assembly: LogAttribute]</code> </p>  <p>By default, it will be applied to all methods of the application. You can use the Filtering Properties to limit the multicasting. Please refer to the <a href="http://doc.sharpcrafters.com/postsharp-2.1/##PostSharp-2.1.chm/html/1B05CE59-61DE-4043-8E7C-12C130B1ACBB.htm">Online Documentation</a> for details.</p>  <p>If we take a look at the compiled assembly in our favorite decompiler, we can see that the output lines were added directly in the method bodies, and no reference to <strong>PostSharp.dll</strong> is required!</p>  <p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="" border="0" alt="" src="/blog/image.axd?picture=77d0796e379d17aa.png" width="644" height="346"></p>  <h4></h4>  <h4>What about writing the output to a file?</h4>  <p>Glad you asked! The <strong>PostSharp Diagnostics Toolkit for NLog</strong> is exactly the solution for writing the output to NLog. Install it from NuGet, it will download all the required dependencies automatically. You will then need to configure NLog (either manually, or by downloading a NuGet package <strong>NLog.Configuration</strong>, which contains a sample configuration file for NLog). Then simply rebuild your application, and NLog will be automatically added to it!</p>  <h2>Few notes:</h2>  <p>The PostSharp Toolkits project is built using the PostSharp SDK. The PostSharp SDK is <strong><u><font color="#ff0000">completely unsupported and undocumented</font></u></strong>, for the reasons detailed in this <a href="http://www.sharpcrafters.com/blog/post/PostSharp-SDK-is-undocumented-and-unsupported.aspx">blog post</a>. While the source code is available on GitHub, any questions pertaining to the PostSharp SDK will go unanswered.</p>  <p>The PostSharp Toolkits is an ongoing project, we are aiming at short (2-week) release cycles, bringing you more features based on your feedback!</p>  <h2>Questions? Suggestions? Bugs?</h2>  <p>Please visit our dedicated <a href="http://www.sharpcrafters.com/forum/Group27.aspx">PostSharp Toolkits Support Forum</a> to let us know what you think!</p>  <p>Happy PostSharping!</p>  <p>-Igal</p>
