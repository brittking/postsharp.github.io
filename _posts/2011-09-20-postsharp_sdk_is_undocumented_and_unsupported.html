---
layout: post 
comments: true
title: "PostSharp SDK is undocumented and unsupported"
date: 2011-09-20 09:24:00 +02:00
permalink: /post/postsharp-sdk-is-undocumented-and-unsupported.html
author: "Gael Fraiteur"
---
<p>This is one of these unpopular but necessary decisions that every software publisher has to do now and then. It’s <a href="http://blogs.msdn.com/b/agile/archive/2011/04/08/on-deprecation.aspx" target="_blank">generally accepted</a> that pulling off expensive but little-used features is a healthy decision because it frees resources that can be spent on more popular features. This is what we are doing with documentation and support of PostSharp SDK.</p>


  <h2>What is PostSharp SDK?</h2>  <p>PostSharp is made of two principal components: <em>PostSharp.dll</em> and <em>PostSharp.Sdk.dll.</em></p>  <p><em>PostSharp.dll</em> is the high-level public API. It mostly contains interface definitions, abstract classes and custom attributes from which developers can derive their own aspects. This library is designed to be used by developers of business applications. It offers transformation primitives (such as: intercepting a method, wrapping a method, introducing an interface) that developers can add to their code.&#160; <em>PostSharp.dll</em> leverages real aspect-oriented programming, a disciplined extension of object-oriented programming. Just as a normal compiler, the high-level API enforces syntactic rules, and you will get a reasonable error message if you violate them.</p>  <p><em>PostSharp.Sdk.dll</em> is the opposite of <em>PostSharp.dll</em>. Its public API allows you to modify .NET assemblies at a very low level. You can do everything. The API does not enforce any programming discipline or syntactic rules. You can create invalid assemblies without even getting a warning. It requires you to learn the MSIL specification and to understand most of the 565 pages of the <a href="http://www.ecma-international.org/publications/standards/Ecma-335.htm" target="_blank">ECMA-335 specification</a>. <em>PostSharp.Sdk.dll</em> is made of several components. The most low-level ones (code model, image reader, image writer) are also found in Mono Cecil and Microsoft CCI, although PostSharp SDK has its own implementation. PostSharp SDK also includes several middle-level components such as the project loader, the aspect infrastructure (which could allow you to use PostSharp SDK to develop an aspect weaver that has different syntax than <em>PostSharp.dll</em>), the aspect weaver (the implementation of the <em>PostSharp.dll</em>), the custom attribute multitasking components, and much more.</p>  <h2>PostSharp SDK is more complex than you think</h2>  <p>Contrarily to PostSharp itself, PostSharp SDK has a very steep, but misleading, learning curve. You get quite quickly the illusion that you “got” it, but the devil is in details. The 80-20 rules does not apply to PostSharp SDK: what applies is 95-5: 95% of time is spent in addressing 5% of cases. Think of MSIL programming as hiking in high mountains without a map. You always have the illusion that the top is near, but whenever you climb on what appeared to be top, you discover another, higher top. If you want to have an idea of the effort you’ll need to reach the goal, you need a map; ECMA-335 and the PostSharp SDK class reference will give you a fair overview of the complexity of your task.</p>  <p>So why do we have PostSharp SDK? First, for our own needs. From our own point of view, PostSharp SDK is the most important component of PostSharp. Secondly, because this API is useful to a tiny minority of ISVs with very specific needs (for instance: high focus on speed). They can afford to maintain MSIL skills because the effort is leveraged to thousands of customers. Third, because PostSharp SDK can be used to overcome missing features of <em>PostSharp.dll</em>. But this is where things can go wrong.</p>  <h2>PostSharp SDK is undocumented and unsupported</h2>  <p>There has been some criticism that PostSharp SDK is undocumented. This is not accurate: the class reference is quite complete and contains more than what’s obvious from the method signature. Many actually claim that PostSharp SDK has the best documentation of all MSIL rewriting tools.</p>  <p>What is true is there is no conceptual documentation. Let me be clear: the lack of conceptual of documentation is a <em>feature</em>, not a defect. The SDK will not be better documented. As any company, we have to allocate limited resources to a potentially unlimited number of features. It does not economically make sense to spend time in documenting a very complex API that is used by a dozen of customers.</p>  <p>The same holds for support. We cannot provide support on a highly complex and incompletely documented API. We cannot guide you through baby steps. PostSharp SDK is not supported. You use it at your own risks.</p>  <h2>Nostra Culpa</h2>  <p>On the support forum, you could often read answers that sounded like “this is not possible to do with <em>PostSharp.dll</em> but can be done with <em>PostSharp.Sdk.dll</em>”, followed by a disclaimer that PostSharp SDK is hard and you should maybe not try. This had led some customers to ask for more information for these specific cases, which I published on the blog. Mistake! These blog posts have been interpreted as an advertisement of and an invitation to use PostSharp SDK. I apologize for that. I will not advertise PostSharp SDK again. It will remain unsupported and undocumented. The harmful blog posts have been withdrawn.</p>  <h2>PostSharp SDK still available</h2>  <p>That said, PostSharp SDK is still available for use in the Professional Edition. We are only making it clearer that this feature is not officially supported, and must be used at own risk. I believe that it’s not a good idea to code directly MSIL instructions unless you can leverage the effort to thousands of customers (as we do), but you’re free to try. It’s just that you’re on your own.</p>  <p>I’m aware this decision will be unpopular, but I’m convinced it’s a necessary one to continue provide good support to the community.</p>  <p>Happy PostSharping !</p>  <p>-gael</p>
