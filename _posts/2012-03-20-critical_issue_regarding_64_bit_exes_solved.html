---
layout: post 
comments: true
title: "Critical issue regarding 64-bit EXEs [Solved]"
date: 2012-03-20 13:31:19 +01:00
permalink: /post/critical-issue-regarding-64-bit-exes-solved.html
author: "Gael Fraiteur"
---
<p>It’s not often that a bug fixes deserves a blog post, but today it happened :-(</p>


  <p><strong>64-bit programs (*.exe) processed by PostSharp 2.1.0.0-2.1.6.9 are unable to allocate more than 2GB of memory</strong> because of a invalid flag in the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms680349(v=vs.85).aspx" target="_blank">NT Header</a> (IMAGE_FILE_32BIT_MACHINE instead of IMAGE_FILE_LARGE_ADDRESS_AWARE). Yes, just one bit.</p>  <p>This issue is especially nasty because generally invisible during testing. It’s only in production that a process attempts to use more memory. The program would them have terminated with an OutOfMemoryException.</p>  <p>Big thanks to Augustunbear Zhang for diagnosing this issue.</p>  <p>The issue is fixed at revision 2.1.6.10.</p>  <p>We recommend customers who have PostSharp-enhanced 64-bit programs (*.exe) in production to rebuild their project and redeploy them.</p>  <p>We sincerely apologize for the inconvenience this issue is causing. For any question or assistance, do not hesitate to <a href="http://www.sharpcrafters.com/company/team/gael" target="_blank">contact me personally</a>.</p>  <p>Happy PostSharping!</p>  <p>-gael</p>
