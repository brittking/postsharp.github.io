---
layout: post 
comments: true
title: "Announcing PostSharp 4.1 Preview 4: Xamarin Support, and More"
date: 2015-01-26 21:31:00 +01:00
permalink: /post/announcing-postsharp-41-preview-4-xamarin-support-and-more.html
author: "Gael Fraiteur"
---
<p>Today we&rsquo;re excited to announce the release of PostSharp 4.1 Preview 4, available for download on <a href="https://www.postsharp.net/download">our website</a> and as pre-release packages on our NuGet feeds. We silently released two other previews since our last announcement. <strong>PostSharp 4.1 is all about supporting new platforms</strong> and it is now feature-complete. Let&rsquo;s see what&rsquo;s new in the box:</p>



<ul>
<li>Support for Xamarin</li>
<li>Windows Phone and Windows</li>
<li>Visual Studio 2015</li>
<li>Conservative NuGet Versioning</li>
<li>Localizable Code Contracts</li>
<li>PostSharp Explorer Improvements</li>
</ul>
<h2>Xamarin</h2>
<p>It made the top of our <a href="http://postsharp.uservoice.com/forums/4949-feature-requests">UserVoice wish list</a> for a long time: Xamarin is now supported as a first-class member of the .NET family. All features of PostSharp, including thread safety patterns, INotifyPropertyChanged and undo/redo, are now available for Xamarin through portable class libraries (PCL).</p>
<p><strong>How to use PostSharp with a Xamarin project</strong>? Just as it works with other projects. Use the smart tag or the light bulb to add a PostSharp aspect, or install the PostSharp NuGet package. It&rsquo;s that simple.</p>
<p>More about Xamarin integration in a later post.</p>
<h2>Windows Phone and Windows Store</h2>
<p>You could already create your own PostSharp aspects or use the built-in INotifyPropertyChanged and undo/redo aspects with Windows Phone and WinRT. With PostSharp 4.1, you can now use PostSharp Threading Pattern Library to create truly cross-platform thread-safe apps. Additionally to .NET Framework and Xamarin, we also ported and tested thread safety library with Windows Phone and Windows Store.</p>
<h2>Visual Studio 2015</h2>
<p>We&rsquo;ve continued to work on support for Visual Studio 2015, and PostSharp is now compatible with VS 2015 CTP 5. There are two different scenarios to be considered:</p>
<ul>
<li><strong>C# and VB compilers</strong>. As you know, Visual Studio 2015 ships with a completely new generation of compilers. They break some assumptions that previous versions of PostSharp were doing. Therefore, if you build working code with VS 2015, you may cause previous versions of PostSharp to crash or invalid code to be generated. We want you to know that we take this situation extremely seriously and that we are committed to provide support for the new compilers in PostSharp 3.1, 4.0 and 4.1. Therefore, you are not forced to upgrade to new major version of PostSharp. However, <strong>you must upgrade to the newest build of your current PostSharp minor release if you want to upgrade to Visual Studio 2015</strong>.<br>&nbsp;</li>
<li><strong>Visual Studio Editor. </strong>We made a significant investment to ensure the optimal user experience of PostSharp in Visual Studio 2015. Not only did we replace the smart tag with the modern light bulb, but we also added live code diagnostics and assistance.</li>
</ul>
<p>More about Visual Studio integration in a later post.</p>
<h2>Conservative NuGet Versioning</h2>
<p>In the past, adding a new aspect using the smart tag or light bulb could cause the PostSharp packages to be silently upgraded to the latest version. This is how the NuGet client works by default, but this is quite annoying. PostSharp 4.1 will now always try to respect the version of PostSharp that you are already using in the solution. If a package upgrade is required because the version you are using does not support the requested feature, PostSharp will request your consent before upgrading the package.</p>
<h2>Localizable Code Contracts</h2>
<p>It is now possible to customize the exception messages generated by PostSharp Code Contracts, and therefore localize them. The API is based on a chain of responsibility, into which you can insert your own message provider. The implementation does not rely on managed resources so it is easier to customize. The feature is not yet documented. Start from class ContractLocalizedTextProvider for more information.</p>
<h2>Summary</h2>
<p>With this new release, PostSharp becomes really cross-platform. Whether you are developing desktop applications with WPF or mobile applications for Windows Phone, Windows 8, Android or iOS, you can rely on PostSharp to deliver features quicker with source code that is more concise, cleaner and more reliable.</p>
<p>PostSharp 4.1 is now feature-complete and there are now just a few issues (documented in the release notes) that we need to solve before we can call it a release candidate. It&rsquo;s a great time to try PostSharp 4.1 if you are not on a tight go-to-production schedule.</p>
<p>We&rsquo;re really eager for feedback from Xamarin and mobile developers, so don&rsquo;t hesitate to contact us with any question, remark or frustration.</p>
<p>Happy PostSharping!</p>
<p>-gael</p>
